import{f as G,u as $,i as q,a as F,b as R,D as X}from"./lit-CA_PTuLV.js";import{o as N,O as k,b as I,B as C,p as V,q as H,E as _,P as O,r as K,s as Y,t as J,a as D,u as Q,v as Z,m as ee,w as te,d as se}from"./three-BwIRAmMQ.js";import{C as T,a as ie,E as ne,O as re,S as ae,F as oe,R as le,b as he}from"./three-addons-BOjiernq.js";import{E as z,T as y}from"./tweenjs-Ba4GXh2m.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const ce={attribute:!0,type:String,converter:$,reflect:!1,hasChanged:G},de=(d=ce,e,t)=>{const{kind:n,metadata:s}=t;let i=globalThis.litPropertyMetadata.get(s);if(i===void 0&&globalThis.litPropertyMetadata.set(s,i=new Map),n==="setter"&&((d=Object.create(d)).wrapped=!0),i.set(t.name,d),n==="accessor"){const{name:r}=t;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(r,c,d,!0,a)},init(a){return a!==void 0&&this.C(r,void 0,d,a),a}}}if(n==="setter"){const{name:r}=t;return function(a){const c=this[r];e.call(this,a),this.requestUpdate(r,c,d,!0,a)}}throw Error("Unsupported decorator location: "+n)};function l(d){return(e,t)=>typeof t=="object"?de(d,e,t):((n,s,i)=>{const r=s.hasOwnProperty(i);return s.constructor.createProperty(i,n),r?Object.getOwnPropertyDescriptor(s,i):void 0})(d,e,t)}const pe=new N({color:0,visible:!1}),ue={bevelEnabled:!0,steps:8,bevelSize:.05,bevelThickness:.1,bevelSegments:4,bevelOffset:-.06,curveSegments:32},be={bevelEnabled:!1,curveSegments:32};class me extends k{constructor(e,t="lambert"){super(),this._sizeInRadians=0,this._innerWidth=5,this._outerWidth=8,this._thickness=.5,this._labelMargin=.5,this._needsUpdate=!1,this._timeout=null,this.invisibleMesh=new I(new C,pe),this.labelDiv=document.createElement("div"),this.labelSpan=document.createElement("span"),this.label=new T(this.labelDiv),this.percentDiv=document.createElement("div"),this.percentIndicator=new T(this.percentDiv),this.material=t==="basic"?new N({color:e}):new V({color:e}),this.mesh=new I(new C,this.material),this.add(this.mesh),this.add(this.invisibleMesh),this.rotateX(Math.PI*1.5),this.setupLabel(e),this.setupPercentIndicator()}set innerWidth(e){this._innerWidth!==e&&(this.needsUpdate=!0),this._innerWidth=e}get innerWidth(){return this._innerWidth}set outerWidth(e){this._outerWidth!==e&&(this.needsUpdate=!0),this._outerWidth=e}get outerWidth(){return this._outerWidth}set sizeInRadians(e){this._sizeInRadians!==e&&(this.needsUpdate=!0),this._sizeInRadians=e}get sizeInRadians(){return this._sizeInRadians}set thickness(e){this._thickness!==e&&(this.needsUpdate=!0),this._thickness=e}get thickness(){return this._thickness}set labelMargin(e){this._labelMargin!==e&&(this.needsUpdate=!0),this._labelMargin=e}get labelMargin(){return this._labelMargin}set needsUpdate(e){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(()=>this.update()),this._needsUpdate=e}get needsUpdate(){return this._needsUpdate}update(){this.updateGeometry(),this.updateLabels()}setLabelText(e){this.labelSpan.innerHTML=e}setPercentText(e){this.percentDiv.innerHTML=e}setupLabel(e){const{labelDiv:t,labelSpan:n,label:s,mesh:i}=this;n.style.borderBottom=`2px solid #${e.toString(16).padStart(6,"0")}`,t.className="label",t.appendChild(n),t.style.backgroundColor="transparent",s.center.set(0,1),s.layers.set(0),i.add(s)}setupPercentIndicator(){const{percentDiv:e,percentIndicator:t,mesh:n}=this;e.className="pct",e.style.backgroundColor="transparent",t.center.set(0,1),t.layers.set(0),n.add(t)}getArcShape(){const{innerWidth:e,outerWidth:t,sizeInRadians:n}=this,s=new H;return s.moveTo(e,0),s.lineTo(t,0),s.absarc(0,0,t,0,n,!1),s.absarc(0,0,e,n,0,!0),s.closePath(),s}updateGeometry(){const{mesh:e,invisibleMesh:t}=this,n=this.getArcShape(),s=new _(n,{...ue,depth:this.thickness}),i=new _(n,{...be,depth:this.thickness});e.geometry.dispose(),e.geometry=s,t.geometry.dispose(),t.geometry=i}updateLabels(){const e=this.getLabelPoint(),t=this.getPercentPoint();this.label.position.set(e.x,e.y,this.thickness+.2),this.percentIndicator.position.set(t.x,t.y,this.thickness+.2)}hideLabels(){this.setLabelText(""),this.setPercentText(""),this.labelMargin=0}getMovePoint(e){const t=new O;return t.absarc(0,0,e,0,this.sizeInRadians/2,!1),t.getPoints(2).pop()}getLabelPoint(){const e=new O,t=this.outerWidth+this.labelMargin;return e.absarc(0,0,t,0,this.sizeInRadians/2,!1),e.getPoints(2).pop()}getPercentPoint(){const e=new O,t=this.innerWidth===0?this.outerWidth*.65:this.innerWidth+(this.outerWidth-this.innerWidth)/2;return e.absarc(0,0,t,0,this.sizeInRadians/2,!1),e.getPoints(2).pop()}}var ge=Object.defineProperty,h=(d,e,t,n)=>{for(var s=void 0,i=d.length-1,r;i>=0;i--)(r=d[i])&&(s=r(e,t,s)||s);return s&&ge(e,t,s),s};const fe={red:16007990,blue:2201331,orange:16750592,green:5025616,yellow:16771899,pink:15277667,lightblue:240116,purple:10233776,amber:16761095,cyan:48340,lighgreen:9159498,brown:7951688,teal:38536,indigo:4149685,bluegrey:6323595,deeppurple:6765239},L=Math.PI*2,ye=-L,S=z.Exponential.InOut,W=z.Exponential.InOut,M=class M extends q{constructor(){super(...arguments),this.slices={},this.colors=Object.values(fe),this.innerWidth=4,this.outerWidth=8,this.labelMargin=1.5,this.thickness=.5,this.highlightDistance=1,this.outlineColor=16777215,this.width=800,this.height=600,this.lightIntensity=2.5,this.ambientLightIntensity=.5,this.toneMappingExposure=1.2,this.animationDuration=1500,this.hideLabels=!1,this.hidePercents=!1,this.material="lambert",this.renderer=new K({alpha:!0,antialias:!1}),this.scene=new Y,this.camera=new J(30,this.width/this.height,1,100),this.sliceContainer=new k,this.pointer=new D(1e3,1e3),this.raycaster=new Q,this.intersected=null,this.invisibleSlices=[],this.labelRenderer=new ie,this.composer=new ne(this.renderer),this.outlinePass=new re(new D(this.width,this.height),this.scene,this.camera)}firstUpdated(){const{width:e,height:t,renderer:n,labelRenderer:s,composer:i,camera:r,outlinePass:a,scene:c,sliceContainer:b,outlineColor:u}=this,{devicePixelRatio:m}=window,w=this.shadowRoot.querySelector("#main"),x=new Z(16777215,this.lightIntensity),g=new ae(oe);w.appendChild(n.domElement),w.appendChild(s.domElement),w.addEventListener("mousemove",this.onPointerMove.bind(this)),w.addEventListener("click",this.onPointerClick.bind(this)),g.uniforms.resolution.value.set(1/e*m,1/t*m),x.position.set(-10,10,10),n.setSize(e,t),n.toneMapping=ee,n.toneMappingExposure=this.toneMappingExposure,n.setPixelRatio(m),n.setAnimationLoop(this._animate.bind(this)),s.setSize(e,t),s.domElement.style.position="absolute",s.domElement.style.top="0px",r.position.set(0,20,27),r.lookAt(0,0,0),a.edgeStrength=4,a.edgeGlow=0,a.edgeThickness=2.5,a.visibleEdgeColor.set(u),a.hiddenEdgeColor.set(u),i.setSize(e,t),i.setPixelRatio(m),i.addPass(new le(c,r)),i.addPass(a),i.addPass(new he),i.addPass(g),b.rotateY(Math.PI*.5),c.add(b),c.add(new te(16777215,this.ambientLightIntensity)),c.add(x)}setupSlices(){const{sliceContainer:e,slices:t,labelMargin:n,colors:s,invisibleSlices:i,animationDuration:r}=this,{innerWidth:a,outerWidth:c,thickness:b}=this,u=e.children,m=Object.keys(t).length,{selectedObjects:w}=this.outlinePass;if(m<u.length)for(let g=m;g<u.length;g++){const p=e.children[g];p.hideLabels(),p.userData.animtween=new y(p).to({sizeInRadians:0,innerWidth:a,outerWidth:c,thickness:b},r).easing(S).start(),p.userData.rotatetween=new y(p.rotation).to({z:ye},r).easing(S).start();const E=w.indexOf(p);E!==-1&&(this.resetSlice(p),w.splice(E,1))}let x=0;Object.keys(t).forEach((g,p)=>{if(!e.children[p]){const P=new me(s[p],this.material);e.add(P),i.push(P.invisibleMesh)}const U=Object.values(t).reduce((P,B)=>P+B,0),v=t[g]/U*L,j=v/L*100,f=e.children[p],A=-(v+x);f.hideLabels(),f.userData.animtween=new y(f).to({sizeInRadians:v,innerWidth:a,outerWidth:c,thickness:b},r).easing(S).start(),f.userData.rotatetween=new y(f.rotation).to({z:A},r).easing(S).start(),setTimeout(()=>{this.hideLabels||(f.setLabelText(g),f.userData.labeltween=new y(f).to({labelMargin:n},300).easing(W).start()),this.hidePercents||f.setPercentText(`<span>${j.toFixed(1)}%</span>`)},r),x+=v})}updated(e){(e.has("slices")||e.has("outerWidth")||e.has("innerWidth")||e.has("thickness"))&&this.setupSlices(),e.has("colors")&&this.updateColors()}updateColors(){const{animationDuration:e}=this;this.colors.forEach((t,n)=>{if(n>=this.sliceContainer.children.length)return;const s=this.sliceContainer.children[n],i=new se(t),{r,g:a,b:c}=i;s.userData.colortween=new y(s.material.color).to({r,g:a,b:c},e).onUpdate(()=>{const{r:b,g:u,b:m}=s.material.color;s.labelSpan.style.borderBottomColor=`rgba(${b*255},${u*255},${m*255})`}).easing(S).start()})}onPointerMove(e){e.offsetX===0&&e.offsetY===0||(this.pointer.x=e.offsetX/this.width*2-1,this.pointer.y=-(e.offsetY/this.height)*2+1)}onPointerClick(){const{intersected:e,sliceContainer:t}=this,{selectedObjects:n}=this.outlinePass;if(e){const s=n.indexOf(e);if(s!==-1)n.splice(s,1);else{const r=t.children.indexOf(e);this.dispatchEvent(new CustomEvent("slice-selected",{detail:{index:r}})),n.push(e)}const i=n.map(r=>t.children.indexOf(r));this.dispatchEvent(new CustomEvent("selection-changed",{detail:{selectedSlices:i}}))}}moveSliceOut(e){const{x:t,y:n}=e.getMovePoint(this.highlightDistance),s=this.thickness+.2;e.userData.tween=new y(e.children[0].position).to({x:t,y:n,z:s},700).easing(W).start()}resetSlice(e){e.userData.tween=new y(e.children[0].position).to({x:0,y:0,z:0},100).start()}renderScene(){const{raycaster:e,intersected:t,pointer:n,camera:s,invisibleSlices:i,scene:r}=this,{selectedObjects:a}=this.outlinePass;e.setFromCamera(n,s);const c=e.intersectObjects(i,!1);if(c.length>0){const b=i.indexOf(c[0].object),u=this.sliceContainer.children[b];t!==u&&(t&&!a.includes(t)&&this.resetSlice(t),this.intersected=u,this.moveSliceOut(this.intersected))}else t&&!a.includes(t)&&this.resetSlice(t),this.intersected=null;this.composer.render(),this.labelRenderer.render(r,s)}_animate(e){this.sliceContainer.children.forEach(t=>{t.userData.tween?.update(e),t.userData.animtween?.update(e),t.userData.rotatetween?.update(e),t.userData.labeltween?.update(e),t.userData.colortween?.update(e)}),this.renderScene()}render(){return R`<div id="main" style="width: ${this.width}px; height: ${this.height}px;"></div>`}};M.styles=F`
		:host {
			display: inline-block;
			position: relative;
			color: currentColor;
		}
		#main {
			width: 100%;
			height: 100%;
		}
		.label,
		.pct {
			pointer-events: none;
		}
		.pct span {
			position: absolute;
			left: 0;
			transform: translate(-50%, -50%);
			text-align: center;
			font-size: 0.9em;
			color: #eee;
			text-shadow: 1px 1px 0px #111;
		}
		.label span {
			position: absolute;
			left: 0;
			transform: translate(-50%, -50%);
			text-align: center;
			border-bottom: 2px solid var(--pie-3d-text-color, #eee);
		}
	`;let o=M;h([l({type:Object})],o.prototype,"slices");h([l({type:Array})],o.prototype,"colors");h([l({type:Number})],o.prototype,"innerWidth");h([l({type:Number})],o.prototype,"outerWidth");h([l({type:Number})],o.prototype,"labelMargin");h([l({type:Number})],o.prototype,"thickness");h([l({type:Number})],o.prototype,"highlightDistance");h([l({type:Number})],o.prototype,"outlineColor");h([l({type:Number})],o.prototype,"width");h([l({type:Number})],o.prototype,"height");h([l({type:Number})],o.prototype,"lightIntensity");h([l({type:Number})],o.prototype,"ambientLightIntensity");h([l({type:Number})],o.prototype,"toneMappingExposure");h([l({type:Number})],o.prototype,"animationDuration");h([l({type:Boolean})],o.prototype,"hideLabels");h([l({type:Boolean})],o.prototype,"hidePercents");h([l({type:String})],o.prototype,"material");window.customElements.define("pie-3d",o);const we={blue:2201331,yellow:16771899,orange:16750592,pink:15277667,green:5025616,red:16007990,lightblue:240116,amber:16761095,purple:10233776,lighgreen:9159498,cyan:48340,brown:7951688,teal:38536,indigo:4149685,bluegrey:6323595,deeppurple:6765239},xe={Belgium:25,UK:5,Germany:3,France:35,Luxemburg:10,"The Netherlands":30,Hungary:7,Denmark:1,Italy:12,Spain:15,Portugal:8},Se={Belgium:25,UK:5,Germany:3,France:35,Luxemburg:10};let ve=xe;setTimeout(()=>{document.querySelector("pie-3d").slices=Se,document.querySelector("pie-3d").innerWidth=3},9e3);setTimeout(()=>{document.querySelector("pie-3d").innerWidth=0},6e3);setTimeout(()=>{document.querySelector("pie-3d").colors=Object.values(we)},3e3);X(R`<pie-3d .slices="${ve}" width="800" height="600" animationDuration="1500">
					<h1>Vite + Lit</h1>
				</pie-3d>`,document.getElementById("demo"));
